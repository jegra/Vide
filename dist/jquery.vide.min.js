/*
 *  Vide - v1.1.1
 *  jQuery plugin for video backgrounds, updated for mobile autoplay
 *  http://vodkabears.github.io/vide/
 *
 *  Made by Ilya Makarov
 *  Under MIT License
 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery)}(this,function(a){"use strict";function b(a){var b,c,d,e,f,g,h,i={};for(f=a.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",").split(","),h=0,g=f.length;h<g&&(c=f[h],-1===c.search(/^(http|https|ftp):\/\//)&&-1!==c.search(":"));h++)b=c.indexOf(":"),d=c.substring(0,b),e=c.substring(b+1),e||(e=void 0),"string"==typeof e&&(e="true"===e||"false"!==e&&e),"string"==typeof e&&(e=isNaN(e)?e:+e),i[d]=e;return null==d&&null==e?a:i}function c(a){a=""+a;var b,c,d,e=a.split(/\s+/),f="50%",g="50%";for(d=0,b=e.length;d<b;d++)c=e[d],"left"===c?f="0%":"right"===c?f="100%":"top"===c?g="0%":"bottom"===c?g="100%":"center"===c?0===d?f="50%":g="50%":0===d?f=c:g=c;return{x:f,y:g}}function d(b,c){var d=function(){c(this.src)};a('<img src="'+b+'.gif">').on("load",d),a('<img src="'+b+'.jpg">').on("load",d),a('<img src="'+b+'.jpeg">').on("load",d),a('<img src="'+b+'.png">').on("load",d)}function e(c,d,e){if(this.$element=a(c),"string"==typeof d&&(d=b(d)),e?"string"==typeof e&&(e=b(e)):e={},"string"==typeof d)d=d.replace(/\.\w*$/,"");else if("object"==typeof d)for(var f in d)d.hasOwnProperty(f)&&(d[f]=d[f].replace(/\.\w*$/,""));this.settings=a.extend({},g,e),this.path=d;try{this.init()}catch(i){if(i.message!==h)throw i}}var f="vide",g={volume:1,playbackRate:1,muted:!0,loop:!0,autoplay:!0,position:"50% 50%",posterType:"detect",fadeIn:!0,fadeInDuration:"1s",resizing:!0,bgColor:"transparent",className:""},h="Not implemented";e.prototype.init=function(){function b(){setTimeout(function(){g.css("opacity",1)},10)}var e,g,i=this,j=i.path,k=j,l="",m=i.$element,n=i.settings,o=c(n.position),p=n.posterType,q=n.fadeIn,r=n.fadeInDuration;g=i.$wrapper=a("<div>").addClass(n.className).css({position:"absolute","z-index":-1,top:0,left:0,bottom:0,right:0,overflow:"hidden","-webkit-background-size":"cover","-moz-background-size":"cover","-o-background-size":"cover","background-size":"cover","background-color":n.bgColor,"background-repeat":"no-repeat","background-position":o.x+" "+o.y,WebkitTransition:"opacity "+r+" ease-in-out",MozTransition:"opacity "+r+" ease-in-out",MsTransition:"opacity "+r+" ease-in-out",OTransition:"opacity "+r+" ease-in-out",transition:"opacity "+r+" ease-in-out"}),q&&g.css("opacity",0),"object"==typeof j&&(j.poster?k=j.poster:j.mp4?k=j.mp4:j.webm?k=j.webm:j.ogv&&(k=j.ogv));var s="";"detect"===p?d(k,function(a){s=a}):"none"!==p&&(s=k+"."+p),"none"!==p&&""!==s&&a("<img/>").attr("src",s).on("load",function(){a(this).remove(),g.css("background-image","url("+s+")"),q&&b()}),"static"===m.css("position")&&m.css("position","relative"),m.prepend(g),"object"==typeof j?(j.mp4&&(l+='<source src="'+j.mp4+'.mp4" type="video/mp4">'),j.webm&&(l+='<source src="'+j.webm+'.webm" type="video/webm">'),j.ogv&&(l+='<source src="'+j.ogv+'.ogv" type="video/ogg">'),e=i.$video=a("<video playsinline>"+l+"</video>")):e=i.$video=a('<video playsinline><source src="'+j+'.mp4" type="video/mp4"><source src="'+j+'.webm" type="video/webm"><source src="'+j+'.ogv" type="video/ogg"></video>');try{e.prop({autoplay:n.autoplay,loop:n.loop,volume:n.volume,muted:n.muted,defaultMuted:n.muted,playbackRate:n.playbackRate,defaultPlaybackRate:n.playbackRate})}catch(t){throw new Error(h)}e.css({margin:"auto",position:"absolute","z-index":-1,top:o.y,left:o.x,"-webkit-transform":"translate(-"+o.x+", -"+o.y+")","-ms-transform":"translate(-"+o.x+", -"+o.y+")","-moz-transform":"translate(-"+o.x+", -"+o.y+")",transform:"translate(-"+o.x+", -"+o.y+")",opacity:0}).one("canplaythrough."+f,function(){i.resize()}).one("playing."+f,function(){e.css({opacity:1}),g.css("background-image","none"),q&&b()}),m.on("resize."+f,function(){n.resizing&&i.resize()}),g.append(e)},e.prototype.getVideoObject=function(){return this.$video[0]},e.prototype.resize=function(){if(this.$video){var a=this.$wrapper,b=this.$video,c=b[0],d=c.videoHeight,e=c.videoWidth,f=a.height(),g=a.width();g/e>f/d?b.css({width:g+2,height:"auto"}):b.css({width:"auto",height:f+2})}},e.prototype.destroy=function(){delete a[f].lookup[this.index],this.$video&&this.$video.off(f),this.$element.off(f).removeData(f),this.$wrapper.remove()},a[f]={lookup:[]},a.fn[f]=function(b,c){var d;return this.each(function(){d=a.data(this,f),d&&d.destroy(),d=new e(this,b,c),d.index=a[f].lookup.push(d)-1,a.data(this,f,d)}),this},a(document).ready(function(){var b=a(window);b.on("resize."+f,function(){for(var b,c=a[f].lookup.length,d=0;d<c;d++)(b=a[f].lookup[d])&&b.settings.resizing&&b.resize()}),b.on("unload."+f,function(){return!1}),a(document).find("[data-"+f+"-bg]").each(function(b,c){var d=a(c),e=d.data(f+"-options"),g=d.data(f+"-bg");d[f](g,e)})})});